{"version":3,"sources":["../../../src/index.ts","../../../src/constants.ts","../../../src/error.ts","../../../src/env.ts","../../../src/format.ts","../../../src/url.ts","../../../src/validators.ts","../../../src/misc.ts","../../../src/provider.ts","../../../src/crypto.ts"],"names":["INTERNAL_ERROR","SERVER_ERROR","code","message","id","jsonrpc","error","on","exports"],"mappings":"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","file":"static/js/24.b635987d.chunk.js","sourcesContent":["import Provider from \"./provider\";\nexport * from \"./provider\";\nexport default Provider;\n//# sourceMappingURL=index.js.map","export const PARSE_ERROR = \"PARSE_ERROR\";\nexport const INVALID_REQUEST = \"INVALID_REQUEST\";\nexport const METHOD_NOT_FOUND = \"METHOD_NOT_FOUND\";\nexport const INVALID_PARAMS = \"INVALID_PARAMS\";\nexport const INTERNAL_ERROR = \"INTERNAL_ERROR\";\nexport const SERVER_ERROR = \"SERVER_ERROR\";\nexport const RESERVED_ERROR_CODES = [-32700, -32600, -32601, -32602, -32603];\nexport const SERVER_ERROR_CODE_RANGE = [-32000, -32099];\nexport const STANDARD_ERROR_MAP = {\n    [PARSE_ERROR]: { code: -32700, message: \"Parse error\" },\n    [INVALID_REQUEST]: { code: -32600, message: \"Invalid Request\" },\n    [METHOD_NOT_FOUND]: { code: -32601, message: \"Method not found\" },\n    [INVALID_PARAMS]: { code: -32602, message: \"Invalid params\" },\n    [INTERNAL_ERROR]: { code: -32603, message: \"Internal error\" },\n    [SERVER_ERROR]: { code: -32000, message: \"Server error\" },\n};\nexport const DEFAULT_ERROR = SERVER_ERROR;\n//# sourceMappingURL=constants.js.map","import { SERVER_ERROR_CODE_RANGE, RESERVED_ERROR_CODES, STANDARD_ERROR_MAP, DEFAULT_ERROR, } from \"./constants\";\nexport function isServerErrorCode(code) {\n    return code <= SERVER_ERROR_CODE_RANGE[0] && code >= SERVER_ERROR_CODE_RANGE[1];\n}\nexport function isReservedErrorCode(code) {\n    return RESERVED_ERROR_CODES.includes(code);\n}\nexport function isValidErrorCode(code) {\n    return typeof code === \"number\";\n}\nexport function getError(type) {\n    if (!Object.keys(STANDARD_ERROR_MAP).includes(type)) {\n        return STANDARD_ERROR_MAP[DEFAULT_ERROR];\n    }\n    return STANDARD_ERROR_MAP[type];\n}\nexport function getErrorByCode(code) {\n    const match = Object.values(STANDARD_ERROR_MAP).find(e => e.code === code);\n    if (!match) {\n        return STANDARD_ERROR_MAP[DEFAULT_ERROR];\n    }\n    return match;\n}\nexport function validateJsonRpcError(response) {\n    if (typeof response.error.code === \"undefined\") {\n        return { valid: false, error: \"Missing code for JSON-RPC error\" };\n    }\n    if (typeof response.error.message === \"undefined\") {\n        return { valid: false, error: \"Missing message for JSON-RPC error\" };\n    }\n    if (!isValidErrorCode(response.error.code)) {\n        return {\n            valid: false,\n            error: `Invalid error code type for JSON-RPC: ${response.error.code}`,\n        };\n    }\n    if (isReservedErrorCode(response.error.code)) {\n        const error = getErrorByCode(response.error.code);\n        if (error.message !== STANDARD_ERROR_MAP[DEFAULT_ERROR].message &&\n            response.error.message === error.message) {\n            return {\n                valid: false,\n                error: `Invalid error code message for JSON-RPC: ${response.error.code}`,\n            };\n        }\n    }\n    return { valid: true };\n}\nexport function parseConnectionError(e, url, type) {\n    return e.message.includes(\"getaddrinfo ENOTFOUND\") || e.message.includes(\"connect ECONNREFUSED\")\n        ? new Error(`Unavailable ${type} RPC url at ${url}`)\n        : e;\n}\n//# sourceMappingURL=error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowser = exports.isNode = exports.isReactNative = void 0;\nfunction isReactNative() {\n    return (typeof document === \"undefined\" &&\n        typeof navigator !== \"undefined\" &&\n        navigator.product === \"ReactNative\");\n}\nexports.isReactNative = isReactNative;\nfunction isNode() {\n    return (typeof process !== \"undefined\" &&\n        typeof process.versions !== \"undefined\" &&\n        typeof process.versions.node !== \"undefined\");\n}\nexports.isNode = isNode;\nfunction isBrowser() {\n    return !isReactNative() && !isNode();\n}\nexports.isBrowser = isBrowser;\n//# sourceMappingURL=env.js.map","import { getError, getErrorByCode, isReservedErrorCode } from \"./error\";\nimport { INTERNAL_ERROR, SERVER_ERROR } from \"./constants\";\nexport function payloadId(entropy = 3) {\n    const date = Date.now() * Math.pow(10, entropy);\n    const extra = Math.floor(Math.random() * Math.pow(10, entropy));\n    return date + extra;\n}\nexport function getBigIntRpcId(entropy = 6) {\n    return BigInt(payloadId(entropy));\n}\nexport function formatJsonRpcRequest(method, params, id) {\n    return {\n        id: id || payloadId(),\n        jsonrpc: \"2.0\",\n        method,\n        params,\n    };\n}\nexport function formatJsonRpcResult(id, result) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        result,\n    };\n}\nexport function formatJsonRpcError(id, error, data) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        error: formatErrorMessage(error, data),\n    };\n}\nexport function formatErrorMessage(error, data) {\n    if (typeof error === \"undefined\") {\n        return getError(INTERNAL_ERROR);\n    }\n    if (typeof error === \"string\") {\n        error = Object.assign(Object.assign({}, getError(SERVER_ERROR)), { message: error });\n    }\n    if (typeof data !== \"undefined\") {\n        error.data = data;\n    }\n    if (isReservedErrorCode(error.code)) {\n        error = getErrorByCode(error.code);\n    }\n    return error;\n}\n//# sourceMappingURL=format.js.map","const HTTP_REGEX = \"^https?:\";\nconst WS_REGEX = \"^wss?:\";\nfunction getUrlProtocol(url) {\n    const matches = url.match(new RegExp(/^\\w+:/, \"gi\"));\n    if (!matches || !matches.length)\n        return;\n    return matches[0];\n}\nfunction matchRegexProtocol(url, regex) {\n    const protocol = getUrlProtocol(url);\n    if (typeof protocol === \"undefined\")\n        return false;\n    return new RegExp(regex).test(protocol);\n}\nexport function isHttpUrl(url) {\n    return matchRegexProtocol(url, HTTP_REGEX);\n}\nexport function isWsUrl(url) {\n    return matchRegexProtocol(url, WS_REGEX);\n}\nexport function isLocalhostUrl(url) {\n    return new RegExp(\"wss?://localhost(:d{2,5})?\").test(url);\n}\n//# sourceMappingURL=url.js.map","export function isJsonRpcPayload(payload) {\n    return (typeof payload === \"object\" &&\n        \"id\" in payload &&\n        \"jsonrpc\" in payload &&\n        payload.jsonrpc === \"2.0\");\n}\nexport function isJsonRpcRequest(payload) {\n    return isJsonRpcPayload(payload) && \"method\" in payload;\n}\nexport function isJsonRpcResponse(payload) {\n    return isJsonRpcPayload(payload) && (isJsonRpcResult(payload) || isJsonRpcError(payload));\n}\nexport function isJsonRpcResult(payload) {\n    return \"result\" in payload;\n}\nexport function isJsonRpcError(payload) {\n    return \"error\" in payload;\n}\nexport function isJsonRpcValidationInvalid(validation) {\n    return \"error\" in validation && validation.valid === false;\n}\n//# sourceMappingURL=validators.js.map","export class IEvents {\n}\n//# sourceMappingURL=misc.js.map","import { EventEmitter } from \"events\";\nimport { IJsonRpcProvider, isJsonRpcResponse, formatJsonRpcRequest, isJsonRpcError, getBigIntRpcId, } from \"@walletconnect/jsonrpc-utils\";\nexport class JsonRpcProvider extends IJsonRpcProvider {\n    constructor(connection) {\n        super(connection);\n        this.events = new EventEmitter();\n        this.hasRegisteredEventListeners = false;\n        this.connection = this.setConnection(connection);\n        if (this.connection.connected) {\n            this.registerEventListeners();\n        }\n    }\n    async connect(connection = this.connection) {\n        await this.open(connection);\n    }\n    async disconnect() {\n        await this.close();\n    }\n    on(event, listener) {\n        this.events.on(event, listener);\n    }\n    once(event, listener) {\n        this.events.once(event, listener);\n    }\n    off(event, listener) {\n        this.events.off(event, listener);\n    }\n    removeListener(event, listener) {\n        this.events.removeListener(event, listener);\n    }\n    async request(request, context) {\n        return this.requestStrict(formatJsonRpcRequest(request.method, request.params || [], request.id || getBigIntRpcId().toString()), context);\n    }\n    async requestStrict(request, context) {\n        return new Promise(async (resolve, reject) => {\n            if (!this.connection.connected) {\n                try {\n                    await this.open();\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n            this.events.on(`${request.id}`, response => {\n                if (isJsonRpcError(response)) {\n                    reject(response.error);\n                }\n                else {\n                    resolve(response.result);\n                }\n            });\n            try {\n                await this.connection.send(request, context);\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    setConnection(connection = this.connection) {\n        return connection;\n    }\n    onPayload(payload) {\n        this.events.emit(\"payload\", payload);\n        if (isJsonRpcResponse(payload)) {\n            this.events.emit(`${payload.id}`, payload);\n        }\n        else {\n            this.events.emit(\"message\", {\n                type: payload.method,\n                data: payload.params,\n            });\n        }\n    }\n    onClose(event) {\n        if (event && event.code === 3000) {\n            this.events.emit(\"error\", new Error(`WebSocket connection closed abnormally with code: ${event.code} ${event.reason ? `(${event.reason})` : \"\"}`));\n        }\n        this.events.emit(\"disconnect\");\n    }\n    async open(connection = this.connection) {\n        if (this.connection === connection && this.connection.connected)\n            return;\n        if (this.connection.connected)\n            this.close();\n        if (typeof connection === \"string\") {\n            await this.connection.open(connection);\n            connection = this.connection;\n        }\n        this.connection = this.setConnection(connection);\n        await this.connection.open();\n        this.registerEventListeners();\n        this.events.emit(\"connect\");\n    }\n    async close() {\n        await this.connection.close();\n    }\n    registerEventListeners() {\n        if (this.hasRegisteredEventListeners)\n            return;\n        this.connection.on(\"payload\", (payload) => this.onPayload(payload));\n        this.connection.on(\"close\", (event) => this.onClose(event));\n        this.connection.on(\"error\", (error) => this.events.emit(\"error\", error));\n        this.connection.on(\"register_error\", (error) => this.onClose());\n        this.hasRegisteredEventListeners = true;\n    }\n}\nexport default JsonRpcProvider;\n//# sourceMappingURL=provider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowserCryptoAvailable = exports.getSubtleCrypto = exports.getBrowerCrypto = void 0;\nfunction getBrowerCrypto() {\n    return (global === null || global === void 0 ? void 0 : global.crypto) || (global === null || global === void 0 ? void 0 : global.msCrypto) || {};\n}\nexports.getBrowerCrypto = getBrowerCrypto;\nfunction getSubtleCrypto() {\n    const browserCrypto = getBrowerCrypto();\n    return browserCrypto.subtle || browserCrypto.webkitSubtle;\n}\nexports.getSubtleCrypto = getSubtleCrypto;\nfunction isBrowserCryptoAvailable() {\n    return !!getBrowerCrypto() && !!getSubtleCrypto();\n}\nexports.isBrowserCryptoAvailable = isBrowserCryptoAvailable;\n//# sourceMappingURL=crypto.js.map"],"sourceRoot":""}